(this["webpackJsonpfirebase-budget"]=this["webpackJsonpfirebase-budget"]||[]).push([[9],{267:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a(0),c=a(83),s=a(2),u=a(60),d=a(3),i=a(7),o=a(62),l=function(){var e=Object(i.a)(Object(d.a)().mark((function e(t,a){var n,r,c;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(o.f)(Object(o.b)(u.b,"users"),Object(o.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=4,Object(o.d)(n);case 4:r=e.sent,c=r.docs[0].data(),a(c.name),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),a(t.displayName),console.error(e.t0),console.log("Error fetching user name");case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(Object(d.a)().mark((function e(t,a){var n,r,c,s;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(o.f)(Object(o.b)(u.b,"users"),Object(o.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=4,Object(o.d)(n);case 4:return r=e.sent,e.next=7,Object(o.d)(Object(o.b)(u.b,"users",r.docs[0].id,"budgets"));case 7:c=e.sent,s=c.docs.map((function(e){return e.data()})),a(s.map((function(e){return{name:e.name,amount:e.amount,budgetId:e.budgetId,category:e.category,totalBudget:e.totalBudget}}))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),console.log("Error fetching budgets");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}(),j=a(268),O=a(263),g=a(52),m=a(22),p=a(266),h=a(237),f=a(8),x=a(238),v=function(){var e=Object(i.a)(Object(d.a)().mark((function e(t,a,n,r,c,s,i,l,b){var j,O,g,m;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!1),j=Object(o.f)(Object(o.b)(u.b,"users"),Object(o.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=5,Object(o.d)(j);case 5:return O=e.sent,e.next=8,Object(o.d)(Object(o.b)(u.b,"users",O.docs[0].id,"budgets"));case 8:if(g=e.sent,m=g.docs.map((function(e){return e.data()})),m.map((function(e){return e.name})).includes(a)){e.next=17;break}return e.next=14,Object(o.a)(Object(o.b)(u.b,"users",O.docs[0].id,"budgets"),{uid:t.uid,budgetId:Object(x.uuid)(),name:a,category:l,amount:r,totalBudget:b});case 14:n([].concat(Object(f.a)(c),[{name:a,amount:r,category:l,totalBudget:b,budgetId:Object(x.uuid)(),uid:t.uid}])),e.next=18;break;case 17:alert("Budget name already exists");case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0),console.log("Error creating budget");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,a,n,r,c,s,u,d,i){return e.apply(this,arguments)}}(),B=a(265),N=a(5);var y=function(){return Object(N.jsx)(B.a,{className:"Alert-Budget",severity:"error",children:"Budget Amount can't be higher than Maximum Budget"})},k=a(73),C=a(70),w=a(92);var S=function(e){var t,a,c,s,u=e.user,d=e.addBudget,i=e.setAddBudget,o=e.budgets,l=e.setBudgets,b=Object(r.useState)(!1),O=Object(n.a)(b,2),f=O[0],x=O[1],B=Object(k.d)({resolver:Object(w.a)(C.a)}),S=B.register,A=B.handleSubmit,D=B.formState.errors;return Object(N.jsx)("div",{className:"Dashboard-AddBudget-Form",children:Object(N.jsxs)(m.b,{children:[f&&Object(N.jsx)(y,{}),Object(N.jsxs)(p.a,{onSubmit:A((function(e){e.BudgetAmount>e.TotalBudget?(x(!0),setTimeout((function(){x(!1)}),2500)):v(u,e.BudgetName,l,e.BudgetAmount,o,d,i,e.BudgetCategory,e.TotalBudget)})),className:"createBudgetForm",children:[Object(N.jsx)("p",{className:"edit-info",children:"Enter budget name"}),Object(N.jsxs)(h.a,{controlId:"floatingBudget",label:"Budget Name",children:[Object(N.jsx)(p.a.Control,Object(g.a)({type:"text",placeholder:"Budget"},S("BudgetName"))),Object(N.jsx)("p",{className:"error",children:null===(t=D.BudgetName)||void 0===t?void 0:t.message})]}),Object(N.jsx)("p",{className:"edit-info",children:"Select budget category"}),Object(N.jsxs)(p.a.Select,Object(g.a)(Object(g.a)({"aria-label":"Default select example"},S("BudgetCategory")),{},{children:[Object(N.jsx)("option",{value:"Other",children:"Other"}),Object(N.jsx)("option",{value:"Housing",children:"Housing"}),Object(N.jsx)("option",{value:"Transportation",children:"Transportation"}),Object(N.jsx)("option",{value:"Food",children:"Food"}),Object(N.jsx)("option",{value:"Utilities",children:"Utilities"}),Object(N.jsx)("option",{value:"Insurance",children:"Insurance"}),Object(N.jsx)("option",{value:"Medical/Dental",children:"Medical/Dental"}),Object(N.jsx)("option",{value:"Savings",children:"Savings"})]})),Object(N.jsx)("p",{className:"error",children:null===(a=D.BudgetCategory)||void 0===a?void 0:a.message}),Object(N.jsx)("p",{className:"edit-info",children:"Enter current budget amount"}),Object(N.jsxs)(h.a,{controlId:"floatingAmount",label:"Current Amount",children:[Object(N.jsx)(p.a.Control,Object(g.a)({type:"number",placeholder:"Amount"},S("BudgetAmount"))),Object(N.jsx)("p",{className:"error",children:null===(c=D.BudgetAmount)||void 0===c?void 0:c.message})]}),Object(N.jsx)("p",{className:"edit-info",children:"Enter maximum budget amount"}),Object(N.jsxs)(h.a,{controlId:"floatingAmount",label:"Maximum Amount",children:[Object(N.jsx)(p.a.Control,Object(g.a)({type:"number",placeholder:"Amount"},S("TotalBudget"))),Object(N.jsx)("p",{className:"error",children:null===(s=D.TotalBudget)||void 0===s?void 0:s.message})]}),Object(N.jsx)(j.a,{variant:"success",type:"submit",className:"btn-submit",children:"Add Budget"}),Object(N.jsx)(j.a,{variant:"danger",onClick:function(){return i(!d)},className:"btn-cancel",children:"Cancel"})]})]})})},A=function(){var e=Object(i.a)(Object(d.a)().mark((function e(t,a,n,r,c,s){var i,l,j,O;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!1),i=Object(o.f)(Object(o.b)(u.b,"users"),Object(o.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=5,Object(o.d)(i);case 5:return l=e.sent,e.next=8,Object(o.d)(Object(o.b)(u.b,"users",l.docs[0].id,"budgets"));case 8:return j=e.sent,O=j.docs.find((function(e){return e.data().name===a})),e.next=12,Object(o.c)(O.ref);case 12:return e.next=14,b(t,r);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),console.log("Error deleting budget");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a,n,r,c,s){return e.apply(this,arguments)}}();var D=function(e){var t=e.user,a=e.delBudget,c=e.setDelBudget,s=e.budgets,u=e.setBudgets,d=Object(r.useState)(s[0].name),i=Object(n.a)(d,2),o=i[0],l=i[1];return Object(N.jsx)("div",{className:"Dashboard-DeleteBudget-Form",children:Object(N.jsx)(m.b,{children:Object(N.jsxs)(p.a,{onSubmit:function(){A(t,o,s,u,a,c)},className:"deleteBudgetForm",children:[Object(N.jsx)("p",{className:"delete-info",children:"Select budget"}),Object(N.jsx)(p.a.Select,{"aria-label":"Default select example",value:o,onChange:function(e){return l(e.target.value)},children:s.map((function(e,t){return Object(N.jsx)("option",{id:e.budgetId,value:e.name,children:e.name},t)}))}),Object(N.jsx)(j.a,{variant:"success",type:"submit",className:"btn-delete",children:"Delete Budget"}),Object(N.jsx)(j.a,{variant:"danger",onClick:function(){return c(!a)},className:"btn-cancel",children:"Cancel"})]})})})},E=function(){var e=Object(i.a)(Object(d.a)().mark((function e(t,a,n,r,c,s,i,l){var j,O,g,m;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!1),j=Object(o.f)(Object(o.b)(u.b,"users"),Object(o.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=5,Object(o.d)(j);case 5:return O=e.sent,e.next=8,Object(o.d)(Object(o.b)(u.b,"users",O.docs[0].id,"budgets"));case 8:return g=e.sent,m=g.docs.find((function(e){return e.data().name===s})),e.next=12,Object(o.g)(m.ref,{name:a,amount:c,category:r,totalBudget:l});case 12:return e.next=14,b(t,n);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),console.log("Error updating budget");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a,n,r,c,s,u,d){return e.apply(this,arguments)}}();var q=function(e){var t=e.user,a=e.budgets,c=e.setBudgets,s=e.budgetName,u=e.setBudgetName,d=e.editBudget,i=e.setEditBudget,o=e.budgetAmount,l=e.setBudgetAmount,b=e.totalBudget,O=e.setTotalBudget,g=Object(r.useState)(!1),f=Object(n.a)(g,2),x=f[0],v=f[1],B=Object(r.useState)(a[0].name),k=Object(n.a)(B,2),C=k[0],w=k[1],S=Object(r.useState)(a[0].category),A=Object(n.a)(S,2),D=A[0],q=A[1],I=Object(r.useState)(!1),F=Object(n.a)(I,2),T=F[0],P=F[1],M=function(){P(!0),setTimeout((function(){P(!1)}),2500)};return Object(r.useEffect)((function(){a.map((function(e){return e.name===C&&(u(e.name),l(e.amount),q(e.category),O(e.totalBudget)),null}))}),[C]),Object(N.jsx)("div",{className:"Dashboard-EditBudget-Form",children:Object(N.jsxs)(m.b,{children:[T&&Object(N.jsx)(y,{}),Object(N.jsxs)(p.a,{noValidate:!0,validated:x,onSubmit:function(e){if(!1===e.currentTarget.checkValidity())e.preventDefault(),e.stopPropagation();else{if(M(),e.preventDefault(),o>b)return void M();E(t,s,c,D,o,C,i,b)}v(!0)},className:"editBudgetForm",children:[Object(N.jsx)("p",{className:"edit-info",children:"Select budget"}),Object(N.jsx)(p.a.Select,{"aria-label":"Default select example",value:C,onChange:function(e){return w(e.target.value)},children:a.map((function(e,t){return Object(N.jsx)("option",{id:e.budgetId,value:e.name,children:e.name},t)}))}),a.map((function(e){return[e.name===C&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("p",{className:"edit-info",children:"Edit budget name"}),Object(N.jsxs)(h.a,{controlId:"floatingBudget",label:C,children:[Object(N.jsx)(p.a.Control,{type:"text",placeholder:"Budget",defaultValue:e.name,onChange:function(e){return u(e.target.value)}}),Object(N.jsx)(p.a.Control.Feedback,{children:"Looks good!"}),Object(N.jsx)(p.a.Control.Feedback,{type:"invalid",children:"Please provide a new name."})]}),Object(N.jsx)("p",{className:"edit-info",children:"Select budget category"}),Object(N.jsxs)(p.a.Select,{"aria-label":"Default select example",onChange:function(e){return q(e.target.value)},children:[Object(N.jsx)("option",{children:a.map((function(e){return[e.name===C&&e.category]}))}),Object(N.jsx)("option",{value:"Housing",children:"Housing"}),Object(N.jsx)("option",{value:"Transportation",children:"Transportation"}),Object(N.jsx)("option",{value:"Food",children:"Food"}),Object(N.jsx)("option",{value:"Utilities",children:"Utilities"}),Object(N.jsx)("option",{value:"Insurance",children:"Insurance"}),Object(N.jsx)("option",{value:"Medical/Dental",children:"Medical/Dental"}),Object(N.jsx)("option",{value:"Savings",children:"Savings"}),Object(N.jsx)("option",{value:"Other",children:"Other"})]}),Object(N.jsx)("p",{className:"edit-info",children:"Edit current budget amount"}),Object(N.jsxs)(h.a,{controlId:"floatingAmount",label:a.map((function(e){return[e.name===C&&e.amount]})),children:[Object(N.jsx)(p.a.Control,{type:"number",placeholder:"Amount",defaultValue:e.amount,onChange:function(e){return l(e.target.valueAsNumber)}}),Object(N.jsx)(p.a.Control.Feedback,{children:"Looks good!"}),Object(N.jsx)(p.a.Control.Feedback,{type:"invalid",children:"Please provide a new amount."})]}),Object(N.jsx)("p",{className:"edit-info",children:"Edit maximum budget amount"}),Object(N.jsxs)(h.a,{controlId:"floatingAmount",label:a.map((function(e){return[e.name===C&&e.totalBudget]})),children:[Object(N.jsx)(p.a.Control,{type:"number",placeholder:"Amount",defaultValue:e.totalBudget,onChange:function(e){return O(e.target.valueAsNumber)}}),Object(N.jsx)(p.a.Control.Feedback,{children:"Looks good!"}),Object(N.jsx)(p.a.Control.Feedback,{type:"invalid",children:"Please provide a new amount."})]}),Object(N.jsx)(j.a,{variant:"success",type:"submit",className:"btn-edit",children:"Edit Budget"}),Object(N.jsx)(j.a,{variant:"danger",onClick:function(){return i(!d)},className:"btn-cancel",children:"Cancel"})]})]}))]})]})})};var I=function(e){var t=e.budgets,a=Object(r.useState)(0),c=Object(n.a)(a,2),s=c[0],u=c[1];return Object(r.useEffect)((function(){!function(){var e=0;t.forEach((function(t){e+=t.amount})),u(e)}()}),[t]),Object(N.jsx)("div",{className:"Summary",children:Object(N.jsxs)(m.d,{className:"text-center text-white",style:{backgroundColor:"#1c1c1c"},children:[Object(N.jsx)(m.c,{className:"p-4 pb-0",children:Object(N.jsx)("section",{children:Object(N.jsxs)("p",{className:"d-flex justify-content-center align-items-center budget-total",children:["Total budget: ",s]})})}),Object(N.jsxs)("div",{className:"text-center p-3",style:{backgroundColor:"rgba(0, 0, 0, 0.2)"},children:["\xa9 2022 Copyright:",Object(N.jsx)("a",{className:"text-white ms-2",href:"https://github.com/Blizzeq",children:"Jakub Krasuski"})]})]})})},F=a(13);t.default=function(e){var t=e.isLoading,a=e.setIsLoading,d=Object(c.a)(u.a),i=Object(n.a)(d,2),o=i[0],g=i[1],p=Object(r.useState)(""),h=Object(n.a)(p,2),f=h[0],x=h[1],v=Object(s.C)(),B=Object(r.useState)(""),y=Object(n.a)(B,2),k=y[0],C=y[1],w=Object(r.useState)(0),A=Object(n.a)(w,2),E=A[0],T=A[1],P=Object(r.useState)(0),M=Object(n.a)(P,2),L=M[0],U=M[1],H=Object(r.useState)(!1),V=Object(n.a)(H,2),z=V[0],J=V[1],G=Object(r.useState)(!1),K=Object(n.a)(G,2),X=K[0],Y=K[1],Q=Object(r.useState)(!1),R=Object(n.a)(Q,2),W=R[0],Z=R[1],$=Object(r.useState)([]),_=Object(n.a)($,2),ee=_[0],te=_[1];return Object(r.useEffect)((function(){if(g)a(!0);else{if(!1===g&&a(!1),!o)return v("/");Object(u.c)(o),l(o,x),b(o,te)}}),[o,g,v]),Object(N.jsx)(N.Fragment,{children:t?Object(N.jsx)(F.a,{}):Object(N.jsxs)("div",{className:"Dashboard",children:[Object(N.jsxs)("div",{className:"Dashboard-Header",children:[f," ",Object(N.jsx)(j.a,{variant:"secondary",onClick:function(){return Object(u.e)()},children:"Logout"})]}),Object(N.jsxs)("div",{className:"Dashboard-Menu",children:[z?Object(N.jsx)(S,{addBudget:z,setAddBudget:J,user:o,budgetName:k,setBudgets:te,budgets:ee}):Object(N.jsxs)("div",{className:"Dashboard-AddBudget",children:[Object(N.jsx)(j.a,{variant:"success",onClick:function(){return J(!z)},children:"+"})," ",Object(N.jsx)("span",{children:"Add new Budget"})]}),0!==ee.length&&[X?Object(N.jsx)(D,{delBudget:X,setDelBudget:Y,user:o,budgets:ee,setBudgets:te}):Object(N.jsxs)("div",{className:"Dashboard-DeleteBudget",children:[Object(N.jsx)(j.a,{variant:"danger",onClick:function(){return Y(!X)},children:"-"})," ",Object(N.jsx)("span",{children:"Delete existing Budget"})]})],0!==ee.length&&[W?Object(N.jsx)(q,{user:o,budgets:ee,setBudgets:te,budgetName:k,setBudgetName:C,editBudget:W,setEditBudget:Z,budgetAmount:E,setBudgetAmount:T,totalBudget:L,setTotalBudget:U}):Object(N.jsxs)("div",{className:"Dashboard-EditBudget",children:[Object(N.jsx)(j.a,{variant:"warning",onClick:function(){return Z(!W)},children:"\u270e"})," ",Object(N.jsx)("span",{children:"Edit existing Budget"})]})]]}),Object(N.jsx)("div",{className:"Dashboard-Budget",children:0!==ee.length&&[ee.map((function(e,t){return Object(N.jsxs)(m.b,{children:[Object(N.jsx)("p",{className:"Budget-Name",children:e.name}),Object(N.jsx)("p",{className:"Budget-Category",children:e.category}),Object(N.jsx)("p",{className:"Budget-Bar",children:Object(N.jsx)(O.a,{animated:!0,now:e.amount,max:e.totalBudget})}),Object(N.jsxs)("p",{className:"Budget-Amount",children:[e.amount,"/",e.totalBudget]})]},t)}))]}),Object(N.jsx)(I,{budgets:ee})]})})}},60:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return i})),a.d(t,"h",(function(){return b})),a.d(t,"d",(function(){return j})),a.d(t,"f",(function(){return O})),a.d(t,"g",(function(){return g})),a.d(t,"e",(function(){return m})),a.d(t,"c",(function(){return o}));var n=a(3),r=a(7),c=a(80),s=a(79),u=a(62),d=(Object(c.a)({apiKey:"AIzaSyC3DMSjnUoA9dF9GM17-cXY2vGrD01UOsg",authDomain:"budget-app-fba0d.firebaseapp.com",projectId:"budget-app-fba0d",storageBucket:"budget-app-fba0d.appspot.com",messagingSenderId:"304622335247",appId:"1:304622335247:web:fed99b704be7ad5cdafa7a"}),Object(s.g)()),i=Object(u.e)(),o=function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(u.f)(Object(u.b)(i,"users"),Object(u.h)("uid","==",t.uid)),e.next=4,Object(u.d)(a);case 4:if(0!==e.sent.docs.length){e.next=8;break}return e.next=8,Object(u.a)(Object(u.b)(i,"users"),{uid:t.uid,name:t.displayName,authProvider:"google",email:t.email});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),l=new s.c,b=function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.m)(d,l);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.k)(d,t,a);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a,r){var c,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.f)(d,a,r);case 3:return c=e.sent,o=c.user,e.next=7,Object(u.a)(Object(u.b)(i,"users"),{uid:o.uid,name:t,authProvider:"local",email:a});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.j)(d,t);case 3:alert("Password reset email sent"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){Object(s.n)(d)}},70:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return u}));var n=a(91),r=n.b().shape({Email:n.d().email("Please provide a valid email.").required("Email is required."),Password:n.d().required("Password is required.")}),c=n.b().shape({Email:n.d().email("Please provide a valid email.").required("Email is required.")}),s=n.b().shape({Name:n.d().required("Name is required."),Email:n.d().email("Please provide a valid email.").required("Email is required."),Password:n.d().required("Password is required.").min(6,"Password must be at least 6 characters.")}),u=n.b().shape({BudgetName:n.d().required("Budget name is required."),BudgetCategory:n.d().required("Budget category is required."),BudgetAmount:n.a().required().typeError("Budget amount is required."),TotalBudget:n.a().required().typeError("Total budget is required.").min(n.c("BudgetAmount"),"Total budget must be greater than current budget amount.")})}}]);
//# sourceMappingURL=9.56a5d017.chunk.js.map