(this["webpackJsonpfirebase-budget"]=this["webpackJsonpfirebase-budget"]||[]).push([[9],{52:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"h",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return i}));var a=n(3),c=n(7),r=n(63),s=n(62),u=n(54),o=(Object(r.a)({apiKey:"AIzaSyC3DMSjnUoA9dF9GM17-cXY2vGrD01UOsg",authDomain:"budget-app-fba0d.firebaseapp.com",projectId:"budget-app-fba0d",storageBucket:"budget-app-fba0d.appspot.com",messagingSenderId:"304622335247",appId:"1:304622335247:web:fed99b704be7ad5cdafa7a"}),Object(s.g)()),d=Object(u.e)(),i=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(u.f)(Object(u.b)(d,"users"),Object(u.h)("uid","==",t.uid)),e.next=4,Object(u.d)(n);case 4:if(0!==e.sent.docs.length){e.next=8;break}return e.next=8,Object(u.a)(Object(u.b)(d,"users"),{uid:t.uid,name:t.displayName,authProvider:"google",email:t.email});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),l=new s.c,b=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.m)(o,l);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.k)(o,t,n);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n,c){var r,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.f)(o,n,c);case 3:return r=e.sent,i=r.user,e.next=7,Object(u.a)(Object(u.b)(d,"users"),{uid:i.uid,name:t,authProvider:"local",email:n});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.j)(o,t);case 3:alert("Password reset email sent"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){Object(s.n)(o)}},86:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),r=n(66),s=n(2),u=n(52),o=n(3),d=n(7),i=n(54),l=function(){var e=Object(d.a)(Object(o.a)().mark((function e(t,n){var a,c,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(i.f)(Object(i.b)(u.b,"users"),Object(i.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=4,Object(i.d)(a);case 4:c=e.sent,r=c.docs[0].data(),n(r.name),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),n(t.displayName),console.error(e.t0),console.log("Error fetching user name");case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(Object(o.a)().mark((function e(t,n){var a,c,r,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(i.f)(Object(i.b)(u.b,"users"),Object(i.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=4,Object(i.d)(a);case 4:return c=e.sent,e.next=7,Object(i.d)(Object(i.b)(u.b,"users",c.docs[0].id,"budgets"));case 7:r=e.sent,s=r.docs.map((function(e){return e.data()})),n(s.map((function(e){return{name:e.name,amount:e.amount,budgetId:e.budgetId,category:e.category,totalBudget:e.totalBudget}}))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),console.log("Error fetching budgets");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),j=n(87),O=n(22),g=n(85),m=n(75),p=n(8),h=n(76),f=function(){var e=Object(d.a)(Object(o.a)().mark((function e(t,n,a,c,r,s,d,l,b){var j,O,g,m;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!1),j=Object(i.f)(Object(i.b)(u.b,"users"),Object(i.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=5,Object(i.d)(j);case 5:return O=e.sent,e.next=8,Object(i.d)(Object(i.b)(u.b,"users",O.docs[0].id,"budgets"));case 8:if(g=e.sent,m=g.docs.map((function(e){return e.data()})),m.map((function(e){return e.name})).includes(n)){e.next=17;break}return e.next=14,Object(i.a)(Object(i.b)(u.b,"users",O.docs[0].id,"budgets"),{uid:t.uid,budgetId:Object(h.uuid)(),name:n,category:l,amount:c,totalBudget:b});case 14:a([].concat(Object(p.a)(r),[{name:n,amount:c,category:l,totalBudget:b}])),e.next=18;break;case 17:alert("Budget name already exists");case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0),console.log("Error creating budget");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,n,a,c,r,s,u,o,d){return e.apply(this,arguments)}}(),x=n(5);var v=function(e){var t=e.user,n=e.addBudget,r=e.setAddBudget,s=e.budgets,u=e.setBudgets,o=e.setBudgetName,d=e.setBudgetAmount,i=e.budgetName,l=e.budgetAmount,b=e.totalBudget,p=e.setTotalBudget,h=Object(c.useState)(!1),v=Object(a.a)(h,2),B=v[0],k=v[1],N=Object(c.useState)("Other"),y=Object(a.a)(N,2),C=y[0],S=y[1];return Object(x.jsx)("div",{className:"Dashboard-AddBudget-Form",children:Object(x.jsx)(O.b,{children:Object(x.jsxs)(g.a,{noValidate:!0,validated:B,onSubmit:function(e){!1===e.currentTarget.checkValidity()?(e.preventDefault(),e.stopPropagation()):f(t,i,u,l,s,n,r,C,b),k(!0)},className:"createBudgetForm",children:[Object(x.jsx)("p",{className:"edit-info",children:"Enter budget name"}),Object(x.jsxs)(m.a,{controlId:"floatingBudget",label:"Budget Name",children:[Object(x.jsx)(g.a.Control,{type:"text",placeholder:"Budget",onChange:function(e){return o(e.target.value)},required:!0}),Object(x.jsx)(g.a.Control.Feedback,{children:"Looks good!"}),Object(x.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please provide a name for your budget."})]}),Object(x.jsx)("p",{className:"edit-info",children:"Select budget category"}),Object(x.jsxs)(g.a.Select,{"aria-label":"Default select example",onChange:function(e){return S(e.target.value)},children:[Object(x.jsx)("option",{children:"Select category"}),Object(x.jsx)("option",{value:"Housing",children:"Housing"}),Object(x.jsx)("option",{value:"Transportation",children:"Transportation"}),Object(x.jsx)("option",{value:"Food",children:"Food"}),Object(x.jsx)("option",{value:"Utilities",children:"Utilities"}),Object(x.jsx)("option",{value:"Insurance",children:"Insurance"}),Object(x.jsx)("option",{value:"Medical/Dental",children:"Medical/Dental"}),Object(x.jsx)("option",{value:"Savings",children:"Savings"}),Object(x.jsx)("option",{value:"Other",children:"Other"})]}),Object(x.jsx)("p",{className:"edit-info",children:"Enter current budget amount"}),Object(x.jsxs)(m.a,{controlId:"floatingAmount",label:"Current Amount",children:[Object(x.jsx)(g.a.Control,{type:"number",placeholder:"Amount",onChange:function(e){return d(e.target.valueAsNumber)},required:!0}),Object(x.jsx)(g.a.Control.Feedback,{children:"Looks good!"}),Object(x.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please provide a valid amount."})]}),Object(x.jsx)("p",{className:"edit-info",children:"Enter maximum budget amount"}),Object(x.jsxs)(m.a,{controlId:"floatingAmount",label:"Maximum Amount",children:[Object(x.jsx)(g.a.Control,{type:"number",placeholder:"Amount",onChange:function(e){return p(e.target.valueAsNumber)},required:!0}),Object(x.jsx)(g.a.Control.Feedback,{children:"Looks good!"}),Object(x.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please provide a valid total amount."})]}),Object(x.jsx)(j.a,{variant:"success",type:"submit",className:"btn-submit",children:"Add Budget"}),Object(x.jsx)(j.a,{variant:"danger",onClick:function(){return r(!n)},className:"btn-cancel",children:"Cancel"})]})})})},B=function(){var e=Object(d.a)(Object(o.a)().mark((function e(t,n,a,c,r,s){var d,l,j,O;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!1),d=Object(i.f)(Object(i.b)(u.b,"users"),Object(i.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=5,Object(i.d)(d);case 5:return l=e.sent,e.next=8,Object(i.d)(Object(i.b)(u.b,"users",l.docs[0].id,"budgets"));case 8:return j=e.sent,O=j.docs.find((function(e){return e.data().name===n})),e.next=12,Object(i.c)(O.ref);case 12:return e.next=14,b(t,c);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),console.log("Error deleting budget");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,a,c,r,s){return e.apply(this,arguments)}}();var k=function(e){var t=e.user,n=e.delBudget,r=e.setDelBudget,s=e.budgets,u=e.setBudgets,o=Object(c.useState)(s[0].name),d=Object(a.a)(o,2),i=d[0],l=d[1];return Object(x.jsx)("div",{className:"Dashboard-DeleteBudget-Form",children:Object(x.jsx)(O.b,{children:Object(x.jsxs)(g.a,{onSubmit:function(){B(t,i,s,u,n,r)},className:"deleteBudgetForm",children:[Object(x.jsx)("p",{className:"delete-info",children:"Select budget"}),Object(x.jsx)(g.a.Select,{"aria-label":"Default select example",value:i,onChange:function(e){return l(e.target.value)},children:s.map((function(e,t){return Object(x.jsx)("option",{id:e.budgetId,value:e.name,children:e.name},t)}))}),Object(x.jsx)(j.a,{variant:"success",type:"submit",className:"btn-delete",children:"Delete Budget"}),Object(x.jsx)(j.a,{variant:"danger",onClick:function(){return r(!n)},className:"btn-cancel",children:"Cancel"})]})})})},N=function(){var e=Object(d.a)(Object(o.a)().mark((function e(t,n,a,c,r,s,d,l){var j,O,g,m;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!1),j=Object(i.f)(Object(i.b)(u.b,"users"),Object(i.h)("uid","==",null===t||void 0===t?void 0:t.uid)),e.next=5,Object(i.d)(j);case 5:return O=e.sent,e.next=8,Object(i.d)(Object(i.b)(u.b,"users",O.docs[0].id,"budgets"));case 8:return g=e.sent,m=g.docs.find((function(e){return e.data().name===s})),e.next=12,Object(i.g)(m.ref,{name:n,amount:r,category:c,totalBudget:l});case 12:return e.next=14,b(t,a);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),console.log("Error updating budget");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,a,c,r,s,u,o){return e.apply(this,arguments)}}();var y=function(e){var t=e.user,n=e.budgets,r=e.setBudgets,s=e.budgetName,u=e.setBudgetName,o=e.editBudget,d=e.setEditBudget,i=e.budgetAmount,l=e.setBudgetAmount,b=e.totalBudget,p=e.setTotalBudget,h=Object(c.useState)(!1),f=Object(a.a)(h,2),v=f[0],B=f[1],k=Object(c.useState)(n[0].name),y=Object(a.a)(k,2),C=y[0],S=y[1],w=Object(c.useState)(n[0].category),A=Object(a.a)(w,2),D=A[0],F=A[1];return Object(c.useEffect)((function(){n.map((function(e){return e.name===C&&(u(e.name),l(e.amount),F(e.category),p(e.totalBudget)),null}))}),[C]),Object(x.jsx)("div",{className:"Dashboard-EditBudget-Form",children:Object(x.jsx)(O.b,{children:Object(x.jsxs)(g.a,{noValidate:!0,validated:v,onSubmit:function(e){!1===e.currentTarget.checkValidity()?(e.preventDefault(),e.stopPropagation()):(e.preventDefault(),N(t,s,r,D,i,C,d,b)),B(!0)},className:"editBudgetForm",children:[Object(x.jsx)("p",{className:"edit-info",children:"Select budget"}),Object(x.jsx)(g.a.Select,{"aria-label":"Default select example",value:C,onChange:function(e){return S(e.target.value)},children:n.map((function(e,t){return Object(x.jsx)("option",{id:e.budgetId,value:e.name,children:e.name},t)}))}),n.map((function(e){return[e.name===C&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"edit-info",children:"Edit budget name"}),Object(x.jsxs)(m.a,{controlId:"floatingBudget",label:C,children:[Object(x.jsx)(g.a.Control,{type:"text",placeholder:"Budget",defaultValue:e.name,onChange:function(e){return u(e.target.value)}}),Object(x.jsx)(g.a.Control.Feedback,{children:"Looks good!"}),Object(x.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please provide a new name."})]}),Object(x.jsx)("p",{className:"edit-info",children:"Select budget category"}),Object(x.jsxs)(g.a.Select,{"aria-label":"Default select example",onChange:function(e){return F(e.target.value)},children:[Object(x.jsx)("option",{children:n.map((function(e){return[e.name===C&&e.category]}))}),Object(x.jsx)("option",{value:"Housing",children:"Housing"}),Object(x.jsx)("option",{value:"Transportation",children:"Transportation"}),Object(x.jsx)("option",{value:"Food",children:"Food"}),Object(x.jsx)("option",{value:"Utilities",children:"Utilities"}),Object(x.jsx)("option",{value:"Insurance",children:"Insurance"}),Object(x.jsx)("option",{value:"Medical/Dental",children:"Medical/Dental"}),Object(x.jsx)("option",{value:"Savings",children:"Savings"}),Object(x.jsx)("option",{value:"Other",children:"Other"})]}),Object(x.jsx)("p",{className:"edit-info",children:"Edit current budget amount"}),Object(x.jsxs)(m.a,{controlId:"floatingAmount",label:n.map((function(e){return[e.name===C&&e.amount]})),children:[Object(x.jsx)(g.a.Control,{type:"number",placeholder:"Amount",defaultValue:e.amount,onChange:function(e){return l(e.target.valueAsNumber)}}),Object(x.jsx)(g.a.Control.Feedback,{children:"Looks good!"}),Object(x.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please provide a new amount."})]}),Object(x.jsx)("p",{className:"edit-info",children:"Edit maximum budget amount"}),Object(x.jsxs)(m.a,{controlId:"floatingAmount",label:n.map((function(e){return[e.name===C&&e.totalBudget]})),children:[Object(x.jsx)(g.a.Control,{type:"number",placeholder:"Amount",defaultValue:e.totalBudget,onChange:function(e){return p(e.target.valueAsNumber)}}),Object(x.jsx)(g.a.Control.Feedback,{children:"Looks good!"}),Object(x.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please provide a new amount."})]}),Object(x.jsx)(j.a,{variant:"success",type:"submit",className:"btn-edit",children:"Edit Budget"}),Object(x.jsx)(j.a,{variant:"danger",onClick:function(){return d(!o)},className:"btn-cancel",children:"Cancel"})]})]}))]})})})};var C=function(e){var t=e.budgets,n=Object(c.useState)(0),r=Object(a.a)(n,2),s=r[0],u=r[1];return Object(c.useEffect)((function(){!function(){var e=0;t.forEach((function(t){e+=t.amount})),u(e)}()}),[t]),Object(x.jsx)("div",{className:"Summary",children:Object(x.jsxs)(O.d,{className:"text-center text-white",style:{backgroundColor:"#1c1c1c"},children:[Object(x.jsx)(O.c,{className:"p-4 pb-0",children:Object(x.jsx)("section",{className:"",children:Object(x.jsxs)("p",{className:"d-flex justify-content-center align-items-center",children:["Total budget: ",s]})})}),Object(x.jsxs)("div",{className:"text-center p-3",style:{backgroundColor:"rgba(0, 0, 0, 0.2)"},children:["\xa9 2022 Copyright:",Object(x.jsx)("a",{className:"text-white",href:"https://github.com/Blizzeq",children:"Jakub Krasuski"})]})]})})},S=n(13);t.default=function(e){var t=e.isLoading,n=e.setIsLoading,o=Object(r.a)(u.a),d=Object(a.a)(o,2),i=d[0],g=d[1],m=Object(c.useState)(""),p=Object(a.a)(m,2),h=p[0],f=p[1],B=Object(s.C)(),N=Object(c.useState)(""),w=Object(a.a)(N,2),A=w[0],D=w[1],F=Object(c.useState)(0),E=Object(a.a)(F,2),I=E[0],P=E[1],T=Object(c.useState)(0),L=Object(a.a)(T,2),M=L[0],V=L[1],U=Object(c.useState)(!1),H=Object(a.a)(U,2),q=H[0],z=H[1],J=Object(c.useState)(!1),G=Object(a.a)(J,2),K=G[0],X=G[1],Y=Object(c.useState)(!1),Q=Object(a.a)(Y,2),R=Q[0],W=Q[1],Z=Object(c.useState)([]),$=Object(a.a)(Z,2),_=$[0],ee=$[1];return Object(c.useEffect)((function(){if(g)n(!0);else{if(!1===g&&n(!1),!i)return B("/");Object(u.c)(i),l(i,f),b(i,ee)}}),[i,g,B]),Object(x.jsx)(x.Fragment,{children:t?Object(x.jsx)(S.a,{}):Object(x.jsxs)("div",{className:"Dashboard",children:[Object(x.jsxs)("div",{className:"Dashboard-Header",children:[h," ",Object(x.jsx)(j.a,{variant:"secondary",onClick:function(){return Object(u.e)()},children:"Logout"})]}),Object(x.jsxs)("div",{className:"Dashboard-Menu",children:[q?Object(x.jsx)(v,{addBudget:q,setAddBudget:z,user:i,budgetName:A,setBudgetName:D,budgetAmount:I,setBudgetAmount:P,setBudgets:ee,budgets:_,totalBudget:M,setTotalBudget:V}):Object(x.jsxs)("div",{className:"Dashboard-AddBudget",children:[Object(x.jsx)(j.a,{variant:"success",onClick:function(){return z(!q)},children:"+"})," ",Object(x.jsx)("span",{children:"Add new Budget"})]}),0!==_.length&&[K?Object(x.jsx)(k,{delBudget:K,setDelBudget:X,user:i,budgets:_,setBudgets:ee}):Object(x.jsxs)("div",{className:"Dashboard-DeleteBudget",children:[Object(x.jsx)(j.a,{variant:"danger",onClick:function(){return X(!K)},children:"-"})," ",Object(x.jsx)("span",{children:"Delete existing Budget"})]})],0!==_.length&&[R?Object(x.jsx)(y,{user:i,budgets:_,setBudgets:ee,budgetName:A,setBudgetName:D,editBudget:R,setEditBudget:W,budgetAmount:I,setBudgetAmount:P,totalBudget:M,setTotalBudget:V}):Object(x.jsxs)("div",{className:"Dashboard-EditBudget",children:[Object(x.jsx)(j.a,{variant:"warning",onClick:function(){return W(!R)},children:"\u270e"})," ",Object(x.jsx)("span",{children:"Edit existing Budget"})]})]]}),0!==_.length&&[_.map((function(e,t){return Object(x.jsx)("div",{className:"Dashboard-Budget",children:Object(x.jsxs)(O.b,{children:[Object(x.jsx)("p",{className:"Budget-Name",children:e.name}),Object(x.jsx)("p",{className:"Budget-Category",children:e.category}),Object(x.jsxs)("p",{className:"Budget-Amount",children:[e.amount,"/",e.totalBudget]})]})},t)}))],Object(x.jsx)(C,{budgets:_})]})})}}}]);
//# sourceMappingURL=9.747b5d15.chunk.js.map